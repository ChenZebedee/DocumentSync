# kafka 压力测试

## 一个分区最多topic 测试 ，10W条数据
|分区数|topic数|延迟设置|结果|
|:---:|:---:|:---:|:---:|
|1|70|10秒|平均每批每秒处理6000条数据|
|1|71|10秒|平均每批每秒处理5000条数据|
|1|72|10秒|大量消费进程出现失效|

### 结论1：在单分区时最多可以并行的topic个数为71个，理论不能超过71个，最好最大数更少一些


## 71个topic 多分区进行消费 测试最高分区数，10W条数据

|分区数|topic数|延迟设置|结果|
|:---:|:---:|:---:|:---:|
|4|71|10秒|平均每批每秒处理5000条数据|
|5|71|10秒|开始出现大量失效，处理成功的平均每批每秒处理6000条数据|

### 结论2：当topic数达到最高值时，最高的分区数为4个分区最佳

## 10分区最多topic个数，10W条数据
|分区数|topic数|延迟设置|结果|
|:---:|:---:|:---:|:---:|
|10|40|10秒|平均每批每秒处理10000条数据|
|10|48|10秒|平均每批每秒处理6000条数据|
|10|49|10秒|平均每批每秒处理5000条数据|
|10|50|10秒|开始大批量消费失效|

### 结论3：当分区数达到10个时，topic数不能超过50个，并且topic数越小，处理效率越高

## 总结：根据应用场景，在10个分区的情况下，最好不要超过49个topic，单个分区的情况下最多不要超过71个topic。最大分区数与最大topic数如下图

|max partition|max topic|
|:----:|:----:|
|4|71|
|10|49|